<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>p5PlayGround</title>
    
    <script src="js/jquery.js" type="text/javascript"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
<!--     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"> -->

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <script src="js/p5.js" type="text/javascript"></script>
    <script src="js/p5.dom.js" type="text/javascript"></script>
    <script src="js/p5.sound.js" type="text/javascript"></script>
    <script src="js/sketch.js" type="text/javascript"></script>

    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

    <style> 
      body {padding: 0; margin: 0;} canvas {vertical-align: top;} 
      #defaultCanvas0 {float: left;}
    </style>
  </head>

  <body>
    <h1>p5.PlayGround</h1>
    <input onclick="addJs();" type="checkbox" data-toggle="toggle"  data-onstyle="info" />
    <script type="text/javascript">
    //insert or remove js files
      var reloadOnce = false;
      $('input').change(function () {
        if ($('input').is(':checked')) {
          var head = document.getElementsByTagName('head')[0];
          //inject ace.js
          var aceJs = document.createElement('script');
          aceJs.id = "aceJs";
          aceJs.type = "text/javascript";
          aceJs.src = "js/ace.js";
          head.insertBefore(aceJs, head.childNodes[0]);
          console.log("injected aceJs");
          //inject p5.inspector.js
          var script = document.createElement("script");
          script.id = "p5Inspector";
          script.type = "text/javascript";
          script.src = "js/p5.inspector.js"; 
          head.insertBefore(script, head.childNodes[1]);
          console.log("injected p5.inspector.js");
        } else {
          $('#p5Inspector').remove();
          $('#aceJs').remove();
          var canvas = document.getElementById('defaultCanvas0');
          if(canvas){
            console.log('replacing canvas');
            canvas.parentNode.removeChild(canvas);
          }
          if(!reloadOnce){
            reload = true;
            location.reload();
          }
        }
      });
      // $(this).click(function() {
      // if ($(this).is(':checked')) {
        
    //   } else {
    //     $('#p5Inspector').remove();
    //     $('#aceJs').remove();
    //     var canvas = document.getElementById('defaultCanvas0');
    //     if(canvas){
    //       console.log('replacing canvas');
    //       canvas.parentNode.removeChild(canvas);
    //     }
    //     if(!reloadOnce){
    //       reload = true;
    //       location.reload();
    //     }
    //   }
    // });

      // var enabled = false;
      //   if(enabled){
      //     $('#p5Inspector').remove();
      //     $('#aceJs').remove();
      //     var canvas = document.getElementById('defaultCanvas0');
      //     if(canvas){
      //       console.log('replacing canvas');
      //       canvas.parentNode.removeChild(canvas);
      //     }
      //     if(!reloadOnce){
      //       reload = true;
      //       location.reload();
      //     }
      //   } 
      //   else {
      //     var head = document.getElementsByTagName('head')[0];
      //     //inject ace.js
      //     var aceJs = document.createElement('script');
      //     aceJs.id = "aceJs";
      //     aceJs.type = "text/javascript";
      //     aceJs.src = "js/ace.js";
      //     head.insertBefore(aceJs, head.childNodes[0]);
      //     console.log("injected aceJs");
      //     //inject p5.inspector.js
      //     var script = document.createElement("script");
      //     script.id = "p5Inspector";
      //     script.type = "text/javascript";
      //     script.src = "js/p5.inspector.js"; 
      //     head.insertBefore(script, head.childNodes[1]);
      //     console.log("injected p5.inspector.js");
      //   }
        // enabled = !enabled;
    </script>
  </body>
</html>
